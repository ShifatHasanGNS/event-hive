<!doctype html>
<html lang="en" class="dark">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>EventHive | AI-Powered Event Database Explorer</title>
  <meta name="description"
    content="EventHive lets you explore event data with natural language queries powered by Google Gemini and PostgreSQL." />
  <script>
    window.tailwind = window.tailwind || {};
    window.tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: {
            display: ['Inter', 'system-ui', 'sans-serif'],
          },
          colors: {
            brand: {
              50: '#f8fafc',
              100: '#f1f5f9',
              200: '#e2e8f0',
              300: '#cbd5f5',
              400: '#94a3c8',
              500: '#64748b',
              600: '#475569',
              700: '#334155',
              800: '#1e293b',
              900: '#0f172a',
              950: '#020617',
            },
          },
        },
      },
    };
  </script>
  <script src="https://cdn.tailwindcss.com?plugins=typography"></script>
  <script src="https://cdn.jsdelivr.net/npm/sql-formatter@15.3.2/browser/sql-formatter.min.js"></script>
  <link rel="stylesheet" href="./styles.css" />
</head>

<body class="relative min-h-screen overflow-x-hidden bg-brand-950 font-display text-brand-50">
  <div class="background-gradient"></div>
  <div class="background-grid"></div>

  <nav class="main-nav">
    <div class="nav-inner">
      <a class="brand" href="/">
        <span class="brand-mark">âŸ¡</span>
        EventHive
      </a>
      <div class="nav-links">
        <a class="nav-link active" href="/">Workspace</a>
        <a class="nav-link" href="/schema.html">Schema Reference</a>
      </div>
    </div>
  </nav>

  <div id="toast-container" class="toast-container" aria-live="polite" aria-atomic="true"></div>

  <main class="relative mx-auto flex max-w-6xl flex-col gap-12 px-4 py-12 lg:gap-16">
    <header class="space-y-4 text-left sm:text-center">
      <div class="flex justify-center">
        <span
          class="rounded-full border border-white/10 bg-white/5 px-3 py-1 text-[0.6rem] uppercase tracking-[0.35em] text-brand-200 backdrop-blur sm:text-xs">
          EventHive
        </span>
      </div>
      <div class="mx-auto max-w-2xl space-y-2 sm:space-y-3">
        <h1 class="text-[1.9rem] font-semibold leading-snug text-white sm:text-4xl lg:text-5xl">
          Event insights in a single view.
        </h1>
        <p class="text-sm text-brand-300 sm:text-base">
          Ask a question, verify the SQL, and run it without leaving the workspace.
        </p>
      </div>
      <div class="grid gap-2 sm:grid-cols-3 sm:gap-3">
        <div class="glass-tile tile-compact">
          <p class="tile-label">Generate SQL</p>
          <p class="tile-meta">Turn plain language into ready-to-run SQL.</p>
        </div>
        <div class="glass-tile tile-compact">
          <p class="tile-label">Stay Focused</p>
          <p class="tile-meta">Draft, review, and execute without switching views.</p>
        </div>
        <div class="glass-tile tile-compact">
          <p class="tile-label">See Insights Fast</p>
          <p class="tile-meta">Row counts, timing, and notices appear with every run.</p>
        </div>
      </div>
    </header>
    <div class="section-divider" aria-hidden="true"></div>

    <section class="glass-panel">
      <div class="flex flex-wrap items-center justify-between gap-3 border-b border-white/5 pb-4">
        <div>
          <p class="text-xs uppercase tracking-[0.3em] text-brand-400">Ask Anything</p>
          <p class="mt-2 text-sm text-brand-300">
            Describe the insight you needâ€”Gemini will generate SQL with full context of your schema.
          </p>
        </div>
        <div
          class="inline-flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-3 py-1 text-xs text-brand-300">
          <span aria-hidden="true">âœ¨</span>
          Natural language to SQL
        </div>
      </div>

      <form id="prompt-form" class="mt-6 space-y-6">
        <div class="prompt-input">
          <span class="input-icon">ðŸ’¡</span>
          <div class="flex-1 space-y-3">
            <textarea id="prompt" name="prompt" rows="3"
              class="w-full resize-none bg-transparent text-base text-brand-100 placeholder:text-brand-500 focus:outline-none"
              placeholder="Show technology events in December with average rating above 4" required></textarea>
            <div class="flex flex-wrap gap-2" id="prompt-actions">
              <button type="button" id="copy-prompt" class="btn btn-ghost btn-xs hidden">Copy</button>
              <button type="button" id="clear-input" class="btn btn-ghost btn-xs hidden">Clear</button>
            </div>
          </div>
        </div>

        <div class="flex flex-wrap items-center justify-end gap-4">
          <button id="generate-button" type="submit" data-loading="false" class="btn btn-outline btn-sm">
            <span class="label-default">Generate SQL</span>
            <span class="label-loading hidden items-center gap-2">
              <span class="loader"></span>
              Generating...
            </span>
          </button>
        </div>
      </form>
      <p id="error-banner"
        class="mt-4 hidden rounded-2xl border border-red-500/20 bg-red-500/10 px-4 py-3 text-sm text-red-200"></p>
    </section>
    <div class="section-divider" aria-hidden="true"></div>

    <section class="grid gap-6 lg:grid-cols-[minmax(0,1.2fr)_minmax(0,0.8fr)]">
      <article class="glass-panel">
        <header class="flex flex-wrap items-center justify-between gap-3 border-b border-white/5 pb-4">
          <div>
            <p class="text-xs uppercase tracking-[0.3em] text-brand-400">Generated SQL</p>
            <p class="mt-2 text-sm text-brand-300">Review and copy Gemini's statements before execution.</p>
          </div>
        </header>
        <textarea id="generated-sql" spellcheck="false" class="sql-editor custom-scrollbar mt-4"
          placeholder="-- SQL will appear here once a prompt is generated"></textarea>
        <div class="mt-4 space-y-3">
          <p class="text-xs text-brand-500">
            Review or tweak the SQL, then run it directly when you are ready.
          </p>
          <div class="flex flex-wrap items-center gap-2" id="sql-actions">
            <button id="run-sql-button" type="button" data-loading="false" disabled class="btn btn-outline btn-sm">
              <span class="label-default">Execute Query</span>
              <span class="label-loading hidden items-center gap-2">
                <span class="loader"></span>
                Running...
              </span>
            </button>
            <button id="copy-sql-btn" type="button" class="btn btn-ghost btn-sm hidden">Copy</button>
            <button id="clear-sql" type="button" class="btn btn-ghost btn-sm hidden">Clear</button>
          </div>
        </div>
      </article>

      <article class="glass-panel">
        <header class="border-b border-white/5 pb-4">
          <p class="text-xs uppercase tracking-[0.3em] text-brand-400">System Messages</p>
          <p class="mt-2 text-sm text-brand-300">Gemini notes, safety guards, and PostgreSQL notices.</p>
        </header>
        <ul id="system-messages" class="custom-scrollbar mt-4 max-h-72 space-y-3 overflow-y-auto">
          <li class="rounded-2xl border border-white/5 bg-brand-950/60 px-4 py-3 text-sm text-brand-300">
            Gemini insights and database notices will appear here.
          </li>
        </ul>
      </article>
    </section>
    <div class="section-divider" aria-hidden="true"></div>

    <section class="glass-panel">
      <header class="flex flex-wrap items-center justify-between gap-3 border-b border-white/5 pb-4">
        <div>
          <p class="text-xs uppercase tracking-[0.3em] text-brand-400">Results</p>
          <p class="mt-2 text-sm text-brand-300" id="results-summary">Run a query to see tables and metrics.</p>
        </div>
        <div class="flex flex-wrap gap-2 text-xs text-brand-300" id="results-stats"></div>
      </header>
      <div id="results-container" class="mt-6 space-y-6"></div>
    </section>
    <div class="section-divider" aria-hidden="true"></div>

    <footer class="pb-12 text-sm text-brand-400">
      <div class="border-t border-white/5 pt-6 text-center">
        <p class="mx-auto">Â© 2025 EventHive Â· Event analytics, made simple.</p>
      </div>
    </footer>
  </main>

  <template id="message-template">
    <li class="rounded-2xl border border-white/5 bg-brand-950/60 px-4 py-3">
      <p class="text-xs uppercase tracking-[0.3em] text-brand-500"></p>
      <p class="mt-2 text-sm text-brand-200"></p>
    </li>
  </template>

  <script src="./app.js" type="module"></script>
</body>

</html>