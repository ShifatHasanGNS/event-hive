<!doctype html>
<html lang="en" class="dark">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>EventHive | AI-Powered Event Database Explorer</title>
  <meta name="description"
    content="EventHive lets you explore event data with natural language queries powered by Google Gemini and PostgreSQL." />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" />
  <link rel="stylesheet" href="/styles.css" />
</head>

<body>
  <div class="background-gradient"></div>
  <div class="background-grid"></div>

  <nav class="site-nav">
    <div class="nav-container">
      <a class="brand-link" href="/">
        <span class="brand-mark">âŸ¡</span>
        EventHive
      </a>
      <div class="nav-list">
        <a class="nav-link nav-link--active" href="/">Workspace</a>
        <a class="nav-link" href="/schema.html">Schema Reference</a>
      </div>
    </div>
  </nav>

  <div id="toast-container"
    class="pointer-events-none fixed bottom-6 right-6 z-50 flex w-full max-w-xs flex-col gap-3 sm:max-w-sm">
  </div>

  <main class="app-main">
    <header class="space-y-8 text-left sm:text-center">
      <div class="flex justify-start sm:justify-center">
        <span class="chip-label">
          EventHive
        </span>
      </div>
      <div class="mx-auto max-w-2xl space-y-3">
        <h1 class="text-[1.9rem] font-semibold leading-snug text-white sm:text-4xl lg:text-5xl">
          Event insights in a single view.
        </h1>
        <p class="text-sm text-brand-300 sm:text-base">
          Ask a question, verify the SQL, and run it without leaving the workspace.
        </p>
      </div>
      <div class="tile-grid">
        <div class="tile-card">
          <p class="tile-label">Generate SQL</p>
          <p class="tile-caption">Turn plain language into ready-to-run SQL.</p>
        </div>
        <div class="tile-card">
          <p class="tile-label">Stay Focused</p>
          <p class="tile-caption">Draft, review, and execute without switching views.</p>
        </div>
        <div class="tile-card">
          <p class="tile-label">See Insights Fast</p>
          <p class="tile-caption">Row counts, timing, and notices appear with every run.</p>
        </div>
      </div>
    </header>

    <section class="glass-panel">
      <div class="flex flex-wrap items-center justify-between gap-3 border-b border-white/10 pb-5">
        <div>
          <p class="text-xs font-semibold uppercase tracking-[0.3em] text-brand-400">Ask Anything</p>
          <p class="mt-2 text-sm text-brand-300">
            Describe the insight you needâ€”Gemini will generate SQL with full context of your schema.
          </p>
        </div>
        <div class="chip-label">
          <span aria-hidden="true">âœ¨</span>
          Natural language to SQL
        </div>
      </div>

      <form id="prompt-form" class="mt-6 space-y-6">
        <div class="prompt-wrapper">
          <span class="prompt-icon">ðŸ’¡</span>
          <div class="flex-1 space-y-3">
            <textarea id="prompt" name="prompt" rows="3"
              class="w-full resize-none bg-transparent text-base leading-relaxed text-brand-100 placeholder:text-brand-500 focus:outline-none"
              placeholder="Show technology events in December with average rating above 4" required></textarea>
            <div class="prompt-actions" id="prompt-actions">
              <button type="button" id="copy-prompt" class="chip-button hidden">
                Copy
              </button>
              <button type="button" id="clear-input" class="chip-button hidden">
                Clear
              </button>
            </div>
          </div>
        </div>

        <div class="flex flex-wrap items-center justify-end gap-4">
          <button id="generate-button" type="submit" data-loading="false" class="btn-primary">
            <span data-slot="default">Generate SQL</span>
            <span data-slot="loading"
              class="hidden items-center gap-2 text-brand-100"><span
                class="h-3.5 w-3.5 animate-spin rounded-full border-2 border-white/20 border-t-white"></span>
              Generating...</span>
          </button>
        </div>
      </form>
      <p id="error-banner" class="error-banner hidden"></p>
    </section>

    <section class="grid gap-6 lg:grid-cols-[minmax(0,1.2fr)_minmax(0,0.8fr)]">
      <article class="glass-card">
        <header class="flex flex-wrap items-center justify-between gap-3 border-b border-white/10 pb-4">
          <div>
            <p class="text-xs font-semibold uppercase tracking-[0.3em] text-brand-400">Generated SQL</p>
            <p class="mt-2 text-sm text-brand-300">Review and copy Gemini's statements before execution.</p>
          </div>
        </header>
        <textarea id="generated-sql" spellcheck="false"
          class="sql-editor mt-4 h-56 resize-none"
          placeholder="-- SQL will appear here once a prompt is generated"></textarea>
        <div class="mt-4 space-y-3">
          <p class="text-xs text-brand-500">
            Review or tweak the SQL, then run it directly when you are ready.
          </p>
          <div class="flex flex-wrap items-center gap-2" id="sql-actions">
            <button id="run-sql-button" type="button" data-loading="false" disabled class="btn-secondary">
              <span data-slot="default">Execute Query</span>
              <span data-slot="loading"
                class="hidden items-center gap-2 text-brand-100"><span
                  class="h-3.5 w-3.5 animate-spin rounded-full border-2 border-white/20 border-t-white"></span>
                Running...</span>
            </button>
            <button id="copy-sql-btn" type="button" class="chip-button hidden">
              Copy
            </button>
            <button id="clear-sql" type="button" class="chip-button hidden">
              Clear
            </button>
          </div>
        </div>
      </article>

      <article class="glass-card">
        <header class="border-b border-white/10 pb-4">
          <p class="text-xs font-semibold uppercase tracking-[0.3em] text-brand-400">System Messages</p>
          <p class="mt-2 text-sm text-brand-300">Gemini notes, safety guards, and PostgreSQL notices.</p>
        </header>
        <ul id="system-messages" class="system-list">
          <li class="message-placeholder">
            Gemini insights and database notices will appear here.
          </li>
        </ul>
      </article>
    </section>

    <section class="glass-panel">
      <header class="flex flex-wrap items-center justify-between gap-3 border-b border-white/10 pb-4">
        <div>
          <p class="text-xs font-semibold uppercase tracking-[0.3em] text-brand-400">Results</p>
          <p class="mt-2 text-sm text-brand-300" id="results-summary">Run a query to see tables and metrics.</p>
        </div>
        <div class="flex flex-wrap gap-2 text-xs text-brand-300" id="results-stats"></div>
      </header>
      <div id="results-container" class="results-container"></div>
    </section>

    <footer class="pb-12 text-sm text-brand-400">
      <div class="border-t border-white/10 pt-6 text-center">
        <p class="mx-auto">Â© 2025 EventHive Â· Event analytics, made simple.</p>
      </div>
    </footer>
  </main>

  <template id="message-template">
    <li class="message-card">
      <p class="message-card__label"></p>
      <p class="message-card__body"></p>
    </li>
  </template>

  <script src="./app.js" type="module"></script>
</body>

</html>
